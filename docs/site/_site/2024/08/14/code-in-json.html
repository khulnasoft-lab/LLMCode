

<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  <link rel="stylesheet" href="/assets/css/just-the-docs-default.css">

  <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet">

  <style id="jtd-nav-activation">
  
.site-nav ul li a {
  background-image: none;
}

  </style>

  

  
    <script src="/assets/js/vendor/lunr.min.js"></script>
  

  <script src="/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  



  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>LLMs are bad at returning code in JSON | llmcode</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="LLMs are bad at returning code in JSON" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="LLMs write worse code if you ask them to return the code wrapped in JSON via a tool function call." />
<meta property="og:description" content="LLMs write worse code if you ask them to return the code wrapped in JSON via a tool function call." />
<link rel="canonical" href="http://0.0.0.0:4000/2024/08/14/code-in-json.html" />
<meta property="og:url" content="http://0.0.0.0:4000/2024/08/14/code-in-json.html" />
<meta property="og:site_name" content="llmcode" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-08-14T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="LLMs are bad at returning code in JSON" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-08-14T00:00:00+00:00","datePublished":"2024-08-14T00:00:00+00:00","description":"LLMs write worse code if you ask them to return the code wrapped in JSON via a tool function call.","headline":"LLMs are bad at returning code in JSON","mainEntityOfPage":{"@type":"WebPage","@id":"http://0.0.0.0:4000/2024/08/14/code-in-json.html"},"url":"http://0.0.0.0:4000/2024/08/14/code-in-json.html"}</script>
<!-- End Jekyll SEO tag -->


  
<meta property="og:image" content="http://0.0.0.0:4000/assets/code-in-json.jpg">
<meta property="twitter:image" content="http://0.0.0.0:4000/assets/code-in-json.jpg">

<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="http://0.0.0.0:4000/feed.xml">
<link rel="preconnect" href="https://fonts.gstatic.com">
<link rel="preload" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" as="style" type="text/css" crossorigin>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#157878">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon.png">
<link rel="manifest" href="/assets/icons/site.webmanifest">
<link rel="mask-icon" href="/assets/icons/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">




</head>

<body>
  <a class="skip-to-main" href="#main-content">Skip to main content</a>
  <svg xmlns="http://www.w3.org/2000/svg" class="d-none">
  <symbol id="svg-link" viewBox="0 0 24 24">
  <title>Link</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
  </svg>
</symbol>

  <symbol id="svg-menu" viewBox="0 0 24 24">
  <title>Menu</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
    <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
  </svg>
</symbol>

  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
  <title>Expand</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
    <polyline points="9 18 15 12 9 6"></polyline>
  </svg>
</symbol>

  <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE -->
<symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link">
  <title id="svg-external-link-title">(external link)</title>
  <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line>
</symbol>

  
    <symbol id="svg-doc" viewBox="0 0 24 24">
  <title>Document</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
    <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
  </svg>
</symbol>

    <symbol id="svg-search" viewBox="0 0 24 24">
  <title>Search</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
    <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
  </svg>
</symbol>

  
  
    <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md -->
<symbol id="svg-copy" viewBox="0 0 16 16">
  <title>Copy</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
    <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
    <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
  </svg>
</symbol>
<symbol id="svg-copied" viewBox="0 0 16 16">
  <title>Copied</title>
  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16">
    <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/>
    <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/>
  </svg>
</symbol>

  
</svg>

  <div class="side-bar">
  <div class="site-header" role="banner">
    <a href="/" class="site-title lh-tight">
  llmcode

</a>
    <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false">
      <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg>
    </button>
  </div>

  <nav aria-label="Main" id="site-nav" class="site-nav">
  
  
    <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Installation category" aria-pressed="false">
      <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
    </button><a href="/docs/install.html" class="nav-list-link">Installation</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/install/optional.html" class="nav-list-link">Optional steps</a></li><li class="nav-list-item"><a href="/docs/install/docker.html" class="nav-list-link">Llmcode with docker</a></li><li class="nav-list-item"><a href="/docs/install/codespaces.html" class="nav-list-link">GitHub Codespaces</a></li><li class="nav-list-item"><a href="/docs/install/replit.html" class="nav-list-link">Replit</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Usage category" aria-pressed="false">
      <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
    </button><a href="/docs/usage.html" class="nav-list-link">Usage</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/usage/tips.html" class="nav-list-link">Tips</a></li><li class="nav-list-item"><a href="/docs/usage/commands.html" class="nav-list-link">In-chat commands</a></li><li class="nav-list-item"><a href="/docs/usage/modes.html" class="nav-list-link">Chat modes</a></li><li class="nav-list-item"><a href="/docs/usage/tutorials.html" class="nav-list-link">Tutorial videos</a></li><li class="nav-list-item"><a href="/docs/usage/voice.html" class="nav-list-link">Voice-to-code with llmcode</a></li><li class="nav-list-item"><a href="/docs/usage/images-urls.html" class="nav-list-link">Images &amp; web pages</a></li><li class="nav-list-item"><a href="/docs/usage/caching.html" class="nav-list-link">Prompt caching</a></li><li class="nav-list-item"><a href="/docs/usage/watch.html" class="nav-list-link">Llmcode in your IDE</a></li><li class="nav-list-item"><a href="/docs/usage/browser.html" class="nav-list-link">Llmcode in your browser</a></li><li class="nav-list-item"><a href="/docs/usage/conventions.html" class="nav-list-link">Specifying coding conventions</a></li><li class="nav-list-item"><a href="/docs/usage/copypaste.html" class="nav-list-link">Copy/paste with web chat</a></li><li class="nav-list-item"><a href="/docs/usage/lint-test.html" class="nav-list-link">Linting and testing</a></li><li class="nav-list-item"><a href="/docs/usage/not-code.html" class="nav-list-link">Editing config &amp; text files</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Connecting to LLMs category" aria-pressed="false">
      <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
    </button><a href="/docs/llms.html" class="nav-list-link">Connecting to LLMs</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/llms/openai.html" class="nav-list-link">OpenAI</a></li><li class="nav-list-item"><a href="/docs/llms/anthropic.html" class="nav-list-link">Anthropic</a></li><li class="nav-list-item"><a href="/docs/llms/gemini.html" class="nav-list-link">Gemini</a></li><li class="nav-list-item"><a href="/docs/llms/groq.html" class="nav-list-link">GROQ</a></li><li class="nav-list-item"><a href="/docs/llms/lm-studio.html" class="nav-list-link">LM Studio</a></li><li class="nav-list-item"><a href="/docs/llms/xai.html" class="nav-list-link">xAI</a></li><li class="nav-list-item"><a href="/docs/llms/azure.html" class="nav-list-link">Azure</a></li><li class="nav-list-item"><a href="/docs/llms/cohere.html" class="nav-list-link">Cohere</a></li><li class="nav-list-item"><a href="/docs/llms/deepseek.html" class="nav-list-link">DeepSeek</a></li><li class="nav-list-item"><a href="/docs/llms/ollama.html" class="nav-list-link">Ollama</a></li><li class="nav-list-item"><a href="/docs/llms/openai-compat.html" class="nav-list-link">OpenAI compatible APIs</a></li><li class="nav-list-item"><a href="/docs/llms/openrouter.html" class="nav-list-link">OpenRouter</a></li><li class="nav-list-item"><a href="/docs/llms/vertex.html" class="nav-list-link">Vertex AI</a></li><li class="nav-list-item"><a href="/docs/llms/bedrock.html" class="nav-list-link">Amazon Bedrock</a></li><li class="nav-list-item"><a href="/docs/llms/other.html" class="nav-list-link">Other LLMs</a></li><li class="nav-list-item"><a href="/docs/llms/warnings.html" class="nav-list-link">Model warnings</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Configuration category" aria-pressed="false">
      <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
    </button><a href="/docs/config.html" class="nav-list-link">Configuration</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/config/api-keys.html" class="nav-list-link">API Keys</a></li><li class="nav-list-item"><a href="/docs/config/options.html" class="nav-list-link">Options reference</a></li><li class="nav-list-item"><a href="/docs/config/llmcode_conf.html" class="nav-list-link">YAML config file</a></li><li class="nav-list-item"><a href="/docs/config/dotenv.html" class="nav-list-link">Config with .env</a></li><li class="nav-list-item"><a href="/docs/config/editor.html" class="nav-list-link">Editor configuration</a></li><li class="nav-list-item"><a href="/docs/config/reasoning.html" class="nav-list-link">Reasoning models</a></li><li class="nav-list-item"><a href="/docs/config/adv-model-settings.html" class="nav-list-link">Advanced model settings</a></li><li class="nav-list-item"><a href="/docs/config/model-aliases.html" class="nav-list-link">Model Aliases</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Troubleshooting category" aria-pressed="false">
      <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
    </button><a href="/docs/troubleshooting.html" class="nav-list-link">Troubleshooting</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/troubleshooting/edit-errors.html" class="nav-list-link">File editing problems</a></li><li class="nav-list-item"><a href="/docs/troubleshooting/warnings.html" class="nav-list-link">Model warnings</a></li><li class="nav-list-item"><a href="/docs/troubleshooting/token-limits.html" class="nav-list-link">Token limits</a></li><li class="nav-list-item"><a href="/docs/troubleshooting/imports.html" class="nav-list-link">Dependency versions</a></li><li class="nav-list-item"><a href="/docs/troubleshooting/llmcode-not-found.html" class="nav-list-link">Llmcode not found</a></li><li class="nav-list-item"><a href="/docs/troubleshooting/models-and-keys.html" class="nav-list-link">Models and API keys</a></li><li class="nav-list-item"><a href="/docs/troubleshooting/support.html" class="nav-list-link">Using /help</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Example chat transcripts category" aria-pressed="false">
      <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
    </button><a href="/examples/README.html" class="nav-list-link">Example chat transcripts</a><ul class="nav-list"><li class="nav-list-item"><a href="/examples/hello-world-flask.html" class="nav-list-link">Create a simple flask app with llmcode</a></li><li class="nav-list-item"><a href="/examples/2048-game.html" class="nav-list-link">Modify an open source 2048 game with llmcode</a></li><li class="nav-list-item"><a href="/examples/complex-change.html" class="nav-list-link">A complex multi-file change, with debugging</a></li><li class="nav-list-item"><a href="/examples/add-test.html" class="nav-list-link">Create a “black box” test case</a></li><li class="nav-list-item"><a href="/examples/update-docs.html" class="nav-list-link">Automatically update docs with llmcode</a></li><li class="nav-list-item"><a href="/examples/pong.html" class="nav-list-link">Build pong with llmcode and pygame.</a></li><li class="nav-list-item"><a href="/examples/css-exercises.html" class="nav-list-link">Complete a css exercise with llmcode</a></li><li class="nav-list-item"><a href="/examples/census.html" class="nav-list-link">Download, analyze and plot US Census data</a></li><li class="nav-list-item"><a href="/examples/asciinema.html" class="nav-list-link">Editing an asciinema cast file with llmcode</a></li><li class="nav-list-item"><a href="/examples/hello.html" class="nav-list-link">Hello llmcode!</a></li><li class="nav-list-item"><a href="/examples/no-color.html" class="nav-list-link">Honor the NO_COLOR environment variable</a></li><li class="nav-list-item"><a href="/examples/chat-transcript-css.html" class="nav-list-link">Improve css styling of chat transcripts</a></li><li class="nav-list-item"><a href="/examples/semantic-search-replace.html" class="nav-list-link">Semantic search &amp; replace code with llmcode</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in More info category" aria-pressed="false">
      <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
    </button><a href="/docs/more-info.html" class="nav-list-link">More info</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/git.html" class="nav-list-link">Git integration</a></li><li class="nav-list-item"><a href="/docs/languages.html" class="nav-list-link">Supported languages</a></li><li class="nav-list-item"><a href="/docs/repomap.html" class="nav-list-link">Repository map</a></li><li class="nav-list-item"><a href="/docs/scripting.html" class="nav-list-link">Scripting llmcode</a></li><li class="nav-list-item"><a href="/docs/more/infinite-output.html" class="nav-list-link">Infinite output</a></li><li class="nav-list-item"><a href="/docs/more/edit-formats.html" class="nav-list-link">Edit formats</a></li><li class="nav-list-item"><a href="/docs/more/analytics.html" class="nav-list-link">Analytics</a></li><li class="nav-list-item"><a href="/docs/legal/privacy.html" class="nav-list-link">Privacy policy</a></li></ul></li><li class="nav-list-item"><a href="/docs/faq.html" class="nav-list-link">FAQ</a></li><li class="nav-list-item"><a href="/HISTORY.html" class="nav-list-link">Release history</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Llmcode LLM Leaderboards category" aria-pressed="false">
      <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg>
    </button><a href="/docs/leaderboards/" class="nav-list-link">Llmcode LLM Leaderboards</a><ul class="nav-list"><li class="nav-list-item"><a href="/docs/leaderboards/edit.html" class="nav-list-link">Code editing leaderboard</a></li><li class="nav-list-item"><a href="/docs/leaderboards/refactor.html" class="nav-list-link">Refactoring leaderboard</a></li><li class="nav-list-item"><a href="/docs/leaderboards/by-release-date.html" class="nav-list-link">Scores by release date</a></li><li class="nav-list-item"><a href="/docs/leaderboards/notes.html" class="nav-list-link">Benchmark notes</a></li><li class="nav-list-item"><a href="/docs/leaderboards/contrib.html" class="nav-list-link">Contributing results</a></li></ul></li><li class="nav-list-item"><a href="/blog/" class="nav-list-link">Llmcode blog</a></li></ul>

  <ul class="nav-list"><li class="nav-list-item external">
          <a href="https://github.com/KhulnaSoft/llmcode" class="nav-list-link external"
            
          >
            GitHub
            <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg>
          </a>
        </li><li class="nav-list-item external">
          <a href="https://discord.gg/Tv2uQnR88V" class="nav-list-link external"
            
          >
            Discord
            <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg>
          </a>
        </li></ul>
</nav>


  
  
    <footer class="site-footer">
    Llmcode is AI pair programming in your terminal.
    Llmcode is on
    <a href="https://github.com/KhulnaSoft/llmcode">GitHub</a>
    and
    <a href="https://discord.gg/Tv2uQnR88V">Discord</a>.
</footer>

  
</div>

  <div class="main" id="top">
    <div id="main-header" class="main-header">
  
    

<div class="search" role="search">
  <div class="search-input-wrap">
    <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search llmcode" aria-label="Search llmcode" autocomplete="off">
    <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
  </div>
  <div id="search-results" class="search-results"></div>
</div>

  
  
  
    <nav aria-label="Auxiliary" class="aux-nav">
  <ul class="aux-nav-list">
    
      <li class="aux-nav-list-item">
        <a href="https://github.com/KhulnaSoft/llmcode" class="site-button"
          
        >
          GitHub
        </a>
      </li>
    
      <li class="aux-nav-list-item">
        <a href="https://discord.gg/Tv2uQnR88V" class="site-button"
          
        >
          Discord
        </a>
      </li>
    
      <li class="aux-nav-list-item">
        <a href="/blog/" class="site-button"
          
        >
          Blog
        </a>
      </li>
    
  </ul>
</nav>

  
</div>

    <div class="main-content-wrap">
      
      <div id="main-content" class="main-content">
        <main>
          
            <p class="post-date">August 14, 2024</p>
<h1 id="llms-are-bad-at-returning-code-in-json">
  
  
    <a href="#llms-are-bad-at-returning-code-in-json" class="anchor-heading" aria-labelledby="llms-are-bad-at-returning-code-in-json"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> LLMs are bad at returning code in JSON
  
  
</h1>
    

<p>LLMs produce lower quality code if they’re asked to return it as part of a structured JSON response. This seems to be true for many top models, including those with specialized support for JSON. Benchmarks show that models struggle with syntax errors in the code
they write, related to quoting and escaping it into JSON.
The benchmark results also imply a decreased capacity for solving coding problems due to the burden of JSON formatting.</p>

<style>
    .chart-container {
        position: relative;
        width: 100%;
        max-width: 800px;
        margin: 0 auto;
    }
</style>

<div class="chart-container">
    <canvas id="passRateChart"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function () {
    var ctx = document.getElementById('passRateChart').getContext('2d');
    var chartContainer = document.querySelector('.chart-container');
    
    var yamlData = [{"dirname":"2024-08-15-13-17-11--json-no-lint-gpt-4o-2024-08-06-whole","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":60.2,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":4.3,"total_cost":0.7965},{"dirname":"2024-08-15-13-18-36--json-no-lint-gpt-4o-2024-08-06-func","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"JSON","commit_hash":"bac04a2","pass_rate_1":57.9,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":1,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":5.7,"total_cost":0.8417},{"dirname":"2024-08-15-13-21-55--json-no-lint-gpt-4o-2024-05-13-func","test_cases":133,"model":"gpt-4o-2024-05-13","edit_format":"JSON","commit_hash":"bac04a2","pass_rate_1":60.2,"percent_cases_well_formed":100.0,"error_outputs":2,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":1,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model gpt-4o-2024-05-13","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":7.1,"total_cost":1.2285},{"dirname":"2024-08-15-13-23-33--json-no-lint-claude-3.5-sonnet-whole","test_cases":133,"model":"claude-3.5-sonnet","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":60.2,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model claude-3.5-sonnet","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":10.5,"total_cost":1.6714},{"dirname":"2024-08-15-13-26-38--json-no-lint-deepseek-coder-whole","test_cases":133,"model":"deepseek-coder V2 0724","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":59.4,"percent_cases_well_formed":100.0,"error_outputs":2,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":2,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model deepseek-coder","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":27.9,"total_cost":0.0438},{"dirname":"2024-08-15-13-50-03--json-no-lint-gpt-4o-2024-08-06-whole-2","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":61.7,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":4.2,"total_cost":0.7946},{"dirname":"2024-08-15-13-51-36--json-no-lint-gpt-4o-2024-08-06-func-2","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"JSON","commit_hash":"bac04a2","pass_rate_1":56.4,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":1,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":6.4,"total_cost":0.839},{"dirname":"2024-08-15-13-54-53--json-no-lint-gpt-4o-2024-05-13-func-2","test_cases":133,"model":"gpt-4o-2024-05-13","edit_format":"JSON","commit_hash":"bac04a2","pass_rate_1":60.2,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":1,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model gpt-4o-2024-05-13","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":7.7,"total_cost":1.221},{"dirname":"2024-08-15-13-56-21--json-no-lint-claude-3.5-sonnet-whole-2","test_cases":133,"model":"claude-3.5-sonnet","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":60.9,"percent_cases_well_formed":100.0,"error_outputs":1,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model claude-3.5-sonnet","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":16.5,"total_cost":1.6556},{"dirname":"2024-08-15-14-06-12--json-no-lint-deepseek-coder-whole-2","test_cases":133,"model":"deepseek-coder V2 0724","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":60.9,"percent_cases_well_formed":100.0,"error_outputs":2,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":1,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model deepseek-coder","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":25.8,"total_cost":0.0439},{"dirname":"2024-08-15-14-11-45--json-no-lint-gpt-4o-2024-08-06-whole-3","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":60.9,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":4.3,"total_cost":0.7945},{"dirname":"2024-08-15-14-13-11--json-no-lint-gpt-4o-2024-08-06-func-3","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"JSON","commit_hash":"bac04a2","pass_rate_1":56.4,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":1,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":5.6,"total_cost":0.822},{"dirname":"2024-08-15-14-16-34--json-no-lint-gpt-4o-2024-05-13-func-3","test_cases":133,"model":"gpt-4o-2024-05-13","edit_format":"JSON","commit_hash":"bac04a2","pass_rate_1":58.6,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model gpt-4o-2024-05-13","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":8.7,"total_cost":1.2064},{"dirname":"2024-08-15-14-17-51--json-no-lint-claude-3.5-sonnet-whole-3","test_cases":133,"model":"claude-3.5-sonnet","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":60.2,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model claude-3.5-sonnet","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":11.0,"total_cost":1.6555},{"dirname":"2024-08-15-14-21-06--json-no-lint-deepseek-coder-whole-3","test_cases":133,"model":"deepseek-coder V2 0724","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":61.7,"percent_cases_well_formed":100.0,"error_outputs":3,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":2,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":3,"command":"llmcode --model deepseek-coder","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":24.4,"total_cost":0.0439},{"dirname":"2024-08-15-14-27-17--json-no-lint-gpt-4o-2024-08-06-whole-4","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":60.2,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":4.3,"total_cost":0.8015},{"dirname":"2024-08-15-14-28-58--json-no-lint-gpt-4o-2024-08-06-func-4","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"JSON","commit_hash":"bac04a2","pass_rate_1":60.2,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":6.0,"total_cost":0.8394},{"dirname":"2024-08-15-14-32-58--json-no-lint-gpt-4o-2024-05-13-func-4","test_cases":133,"model":"gpt-4o-2024-05-13","edit_format":"JSON","commit_hash":"bac04a2","pass_rate_1":59.4,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":2,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model gpt-4o-2024-05-13","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":11.1,"total_cost":1.212},{"dirname":"2024-08-15-14-34-39--json-no-lint-claude-3.5-sonnet-whole-4","test_cases":133,"model":"claude-3.5-sonnet","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":60.9,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model claude-3.5-sonnet","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":11.3,"total_cost":1.6635},{"dirname":"2024-08-15-14-38-35--json-no-lint-deepseek-coder-whole-4","test_cases":133,"model":"deepseek-coder V2 0724","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":59.4,"percent_cases_well_formed":100.0,"error_outputs":2,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":2,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model deepseek-coder","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":24.5,"total_cost":0.0438},{"dirname":"2024-08-15-14-44-11--json-no-lint-gpt-4o-2024-08-06-whole-5","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":60.9,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":4.6,"total_cost":0.8023},{"dirname":"2024-08-15-14-45-40--json-no-lint-gpt-4o-2024-08-06-func-5","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"JSON","commit_hash":"bac04a2","pass_rate_1":57.1,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":3,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":6.3,"total_cost":0.8354},{"dirname":"2024-08-15-14-49-44--json-no-lint-gpt-4o-2024-05-13-func-5","test_cases":133,"model":"gpt-4o-2024-05-13","edit_format":"JSON","commit_hash":"bac04a2","pass_rate_1":59.4,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":4,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model gpt-4o-2024-05-13","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":10.5,"total_cost":1.2099},{"dirname":"2024-08-15-14-51-18--json-no-lint-claude-3.5-sonnet-whole-5","test_cases":133,"model":"claude-3.5-sonnet","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":60.2,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model claude-3.5-sonnet","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":11.4,"total_cost":1.6685},{"dirname":"2024-08-15-14-54-41--json-no-lint-deepseek-coder-whole-5","test_cases":133,"model":"deepseek-coder V2 0724","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":61.7,"percent_cases_well_formed":100.0,"error_outputs":2,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":2,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model deepseek-coder","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":24.5,"total_cost":0.0439},{"dirname":"2024-08-15-15-12-55--json-no-lint-strict-gpt-4o-2024-08-06-func-2","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"JSON (strict)","commit_hash":"bf2d5fe","pass_rate_1":57.1,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":5.9,"total_cost":0.8216},{"dirname":"2024-08-15-15-14-31--json-no-lint-strict-gpt-4o-2024-08-06-func-3","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"JSON (strict)","commit_hash":"bf2d5fe","pass_rate_1":54.1,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":2,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":6.3,"total_cost":0.841},{"dirname":"2024-08-15-15-16-14--json-no-lint-strict-gpt-4o-2024-08-06-func-4","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"JSON (strict)","commit_hash":"bf2d5fe","pass_rate_1":59.4,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":5.9,"total_cost":0.8203},{"dirname":"2024-08-15-15-17-50--json-no-lint-strict-gpt-4o-2024-08-06-func-5","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"JSON (strict)","commit_hash":"bf2d5fe","pass_rate_1":57.1,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":1,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":6.1,"total_cost":0.8415},{"dirname":"2024-08-15-17-36-22--json-no-lint-again-gpt-4o-2024-05-13-whole-1","test_cases":133,"model":"gpt-4o-2024-05-13","edit_format":"Markdown","commit_hash":"ed94379","pass_rate_1":60.2,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":7,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-05-13","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":6.8,"total_cost":1.511},{"dirname":"2024-08-15-17-38-13--json-no-lint-again-gpt-4o-2024-05-13-whole-2","test_cases":133,"model":"gpt-4o-2024-05-13","edit_format":"Markdown","commit_hash":"ed94379","pass_rate_1":60.9,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-05-13","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":7.0,"total_cost":1.4954},{"dirname":"2024-08-15-17-40-10--json-no-lint-again-gpt-4o-2024-05-13-whole-3","test_cases":133,"model":"gpt-4o-2024-05-13","edit_format":"Markdown","commit_hash":"ed94379","pass_rate_1":60.9,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model gpt-4o-2024-05-13","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":6.8,"total_cost":1.4999},{"dirname":"2024-08-15-17-41-30--json-no-lint-again-gpt-4o-2024-05-13-whole-4","test_cases":133,"model":"gpt-4o-2024-05-13","edit_format":"Markdown","commit_hash":"ed94379","pass_rate_1":58.6,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-05-13","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":7.4,"total_cost":1.4848},{"dirname":"2024-08-15-17-43-12--json-no-lint-again-gpt-4o-2024-05-13-whole-5","test_cases":133,"model":"gpt-4o-2024-05-13","edit_format":"Markdown","commit_hash":"ed94379","pass_rate_1":59.4,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-05-13","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":7.6,"total_cost":1.4948},{"dirname":"2024-08-15-19-35-32--json-no-lint-again-deepseek-coder-func-1","test_cases":133,"model":"deepseek-coder V2 0724","edit_format":"JSON","commit_hash":"3a2ac02-dirty","pass_rate_1":50.4,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":2,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model deepseek-coder","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":17.8,"total_cost":0.033},{"dirname":"2024-08-15-19-37-50--json-no-lint-again-deepseek-coder-func-2","test_cases":133,"model":"deepseek-coder V2 0724","edit_format":"JSON","commit_hash":"1a98c28","pass_rate_1":49.6,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":5,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model deepseek-coder","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":18.3,"total_cost":0.0336},{"dirname":"2024-08-15-19-40-20--json-no-lint-again-deepseek-coder-func-3","test_cases":133,"model":"deepseek-coder V2 0724","edit_format":"JSON","commit_hash":"1a98c28","pass_rate_1":48.9,"percent_cases_well_formed":100.0,"error_outputs":1,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":5,"indentation_errors":1,"exhausted_context_windows":1,"test_timeouts":2,"command":"llmcode --model deepseek-coder","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":18.4,"total_cost":0.0337},{"dirname":"2024-08-15-19-44-07--json-no-lint-again-deepseek-coder-func-4","test_cases":133,"model":"deepseek-coder V2 0724","edit_format":"JSON","commit_hash":"1a98c28","pass_rate_1":53.4,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":2,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":2,"command":"llmcode --model deepseek-coder","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":17.6,"total_cost":0.033},{"dirname":"2024-08-15-19-46-48--json-no-lint-again-deepseek-coder-func-5","test_cases":133,"model":"deepseek-coder V2 0724","edit_format":"JSON","commit_hash":"1a98c28-dirty","pass_rate_1":53.4,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":11,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":2,"command":"llmcode --model deepseek-coder","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":18.0,"total_cost":0.0332},{"dirname":"2024-08-15-20-07-59--json-no-lint-again-claude-3.5-sonnet-func-1","test_cases":133,"model":"claude-3.5-sonnet","edit_format":"JSON","commit_hash":"1a98c28","pass_rate_1":54.1,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model claude-3.5-sonnet","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":9.5,"total_cost":1.5789},{"dirname":"2024-08-15-20-09-39--json-no-lint-again-claude-3.5-sonnet-func-2","test_cases":133,"model":"claude-3.5-sonnet","edit_format":"JSON","commit_hash":"1a98c28","pass_rate_1":55.6,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model claude-3.5-sonnet","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":9.2,"total_cost":1.5916},{"dirname":"2024-08-15-20-11-39--json-no-lint-again-claude-3.5-sonnet-func-3","test_cases":133,"model":"claude-3.5-sonnet","edit_format":"JSON","commit_hash":"1a98c28","pass_rate_1":53.4,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model claude-3.5-sonnet","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":10.3,"total_cost":1.5896},{"dirname":"2024-08-15-20-13-44--json-no-lint-again-claude-3.5-sonnet-func-4","test_cases":133,"model":"claude-3.5-sonnet","edit_format":"JSON","commit_hash":"1a98c28","pass_rate_1":55.6,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model claude-3.5-sonnet","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":9.2,"total_cost":1.6},{"dirname":"2024-08-15-20-15-51--json-no-lint-again-claude-3.5-sonnet-func-5","test_cases":133,"model":"claude-3.5-sonnet","edit_format":"JSON","commit_hash":"1a98c28","pass_rate_1":51.9,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model claude-3.5-sonnet","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":8.9,"total_cost":1.5936}];
    
    var models = [...new Set(yamlData.map(item => item.model))].sort();
    var editFormats = [...new Set(yamlData.map(item => item.edit_format))];
    
    var datasets = editFormats.map(format => ({
        label: format,
        data: models.map(model => {
            var items = yamlData.filter(d => d.model === model && d.edit_format === format);
            if (items.length === 0) return null;
            var average = items.reduce((sum, item) => sum + item.pass_rate_1, 0) / items.length;
            return parseFloat(average.toFixed(1));
        }),
        backgroundColor: function(context) {
            const format = context.dataset.label;
            if (format === 'Markdown') {
                return 'rgba(54, 162, 235, 0.8)';
            } else if (format.startsWith('JSON')) {
                const ctx = context.chart.ctx;
                const gradient = ctx.createPattern(createStripedCanvas(format === 'JSON (strict)'), 'repeat');
                return gradient;
            } else {
                return 'rgba(75, 192, 192, 0.8)';
            }
        },
    }));

    var data = {
        labels: models,
        datasets: datasets
    };

    function getAspectRatio() {
        var width = chartContainer.offsetWidth;
        // Gradually change aspect ratio from 2 (landscape) to 1 (square)
        return Math.max(1, Math.min(2, width / 300));
    }

    var config = {
        type: 'bar',
        data: data,
        options: {
            responsive: true,
            maintainAspectRatio: true,
            aspectRatio: getAspectRatio(),
            scales: {
                x: {
                    title: {
                        display: true,
                        text: 'Model'
                    }
                },
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'Pass Rate (%, average of 5 runs)'
                    },
                    max: 70
                }
            },
            plugins: {
                title: {
                    display: true,
                    text: 'Coding skill by model and code wrapping strategy',
                    font: {
                        size: 16
                    }
                },
                legend: {
                    position: 'top',
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            let label = context.dataset.label || '';
                            if (label) {
                                label += ': ';
                            }
                            if (context.parsed.y !== null) {
                                label += context.parsed.y.toFixed(1) + '%';
                            }
                            return label;
                        }
                    }
                }
            }
        },
        plugins: [{
            afterDraw: function(chart) {
                var ctx = chart.ctx;
                var isWideScreen = window.innerWidth > 768; // Assuming 768px as the breakpoint for wide screens
                if (isWideScreen) {
                    chart.data.datasets.forEach(function(dataset, i) {
                        var meta = chart.getDatasetMeta(i);
                        meta.data.forEach(function(bar, index) {
                            var data = dataset.data[index];
                            if (data !== null) {
                                ctx.fillStyle = '#000000';
                                ctx.textAlign = 'center';
                                ctx.textBaseline = 'bottom';
                                var displayText = data.toFixed(1) + '%';
                                ctx.fillText(displayText, bar.x, bar.y - 5);
                            }
                        });
                    });
                }
            }
        }]
    };

    var chart = new Chart(ctx, config);

    function resizeChart() {
        chart.options.aspectRatio = getAspectRatio();
        chart.resize();
    }

    window.addEventListener('resize', resizeChart);

    // Initial resize to set correct size
    resizeChart();
});

function createStripedCanvas(isStrict) {
    const patternCanvas = document.createElement('canvas');
    const patternContext = patternCanvas.getContext('2d');
    const size = 10;
    patternCanvas.width = size;
    patternCanvas.height = size;

    patternContext.fillStyle = 'rgba(255, 99, 132, 0.8)';
    patternContext.fillRect(0, 0, size, size);

    if (isStrict) {
        patternContext.strokeStyle = 'rgba(255, 255, 255, 0.8)';
        patternContext.lineWidth = 0.75;
        patternContext.beginPath();
        patternContext.moveTo(0, 0);
        patternContext.lineTo(size, size);
        patternContext.stroke();
    }

    return patternCanvas;
}
</script>

<blockquote>
  <p>Figure 1: Llmcode coding benchmark scores of models using either plain markdown text or JSON to return code.
Pass rate (%) averaged over 5 runs.
Models produce better code when they return it as markdown text,
as compared to returning code in a structured JSON response.</p>
</blockquote>
<h2 id="background">
  
  
    <a href="#background" class="anchor-heading" aria-labelledby="background"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Background
  
  
</h2>
    

<p>People often ask why llmcode uses a plain text format for LLMs to specify code edits (below),
rather than relying on LLM tools and structured JSON responses.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">greeting</span><span class="p">.</span><span class="n">py</span>
<span class="o">&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span> <span class="n">SEARCH</span>
<span class="k">def</span> <span class="nf">greeting</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">)</span>
<span class="o">=======</span>
<span class="k">def</span> <span class="nf">greeting</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Goodbye"</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span> <span class="n">REPLACE</span>
</code></pre></div></div>

<p>People expect that it would be easier and more reliable to use tool calls,
which would involve a structured JSON response more like this:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"filename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"greeting.py"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"search"</span><span class="p">:</span><span class="w"> </span><span class="s2">"def greeting():</span><span class="se">\n</span><span class="s2">    print(</span><span class="se">\"</span><span class="s2">Hello</span><span class="se">\"</span><span class="s2">)</span><span class="se">\n</span><span class="s2">"</span><span class="w">
    </span><span class="nl">"replace"</span><span class="p">:</span><span class="w"> </span><span class="s2">"def greeting():</span><span class="se">\n</span><span class="s2">    print(</span><span class="se">\"</span><span class="s2">Goodbye</span><span class="se">\"</span><span class="s2">)</span><span class="se">\n</span><span class="s2">"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>This question becomes increasingly relevant as LLM providers
continue to improve their tooling for reliably generating JSON.
For example, 
<a href="https://openai.com/index/introducing-structured-outputs-in-the-api/">OpenAI recently announced</a>
the ability to
strictly enforce that JSON responses will be syntactically correct 
and conform to a specified schema.</p>

<p>But just producing valid JSON is not sufficient for AI code generation –
the code inside the JSON matters too.
It has to be high quality code that solves the assigned coding task without errors or bugs.
Unfortunately, 
LLMs write worse code when they’re asked to 
wrap it in JSON.</p>

<p>In some sense this shouldn’t be surprising.
Just look at the very simple
JSON example above, with the escaped 
quotes <code class="language-plaintext highlighter-rouge">\"</code> and
newlines <code class="language-plaintext highlighter-rouge">\n</code>
mixed into the code.
Imagine the additional
complexity
if the code itself contained quoted strings
with their
own escape sequences.</p>

<p>Would <em>you</em> write better code by
typing it out normally
or typing it as a properly escaped 
JSON string?</p>
<h2 id="quantifying-the-benefits-of-plain-text">
  
  
    <a href="#quantifying-the-benefits-of-plain-text" class="anchor-heading" aria-labelledby="quantifying-the-benefits-of-plain-text"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Quantifying the benefits of plain text
  
  
</h2>
    

<p>Previous <a href="/2023/07/02/benchmarks.html">llmcode benchmark results</a>
showed
the superiority of returning code
as plain text compared to JSON-wrapped function calls.
Those results were obtained
over a year ago, against models far less capable than those available today.
OpenAI’s newly announced support for “strict” JSON
suggests the possibility that modern models might be able
to return quality code inside a structured JSON response.</p>

<p>The results presented here are based on
the 
<a href="/2023/07/02/benchmarks.html#the-benchmark">llmcode “code editing” benchmark</a>
of 133 practice exercises from the Exercism python repository.
The benchmark was simplified somewhat to focus on the differences between
plain text and JSON responses.
In particular, models were 
restricted to a single attempt to solve each task
without a second try to fix errors.</p>

<p>The performance of each model was compared across different strategies for returning code:</p>

<ul>
  <li><strong>Markdown</strong> – the model returned the whole source code file in standard markdown triple-backtick fences.</li>
  <li><strong>JSON</strong> – the model used a tool function call to return the whole source code file in a structured JSON response.</li>
  <li><strong>JSON (strict)</strong> – the same as the “JSON” strategy, but with <code class="language-plaintext highlighter-rouge">strict=True</code>. Only gpt-4o-2024-08-06 supported this setting.</li>
</ul>

<p>The markdown strategy was the same as
llmcode’s “whole” edit format, where the
LLM returns an entire updated copy of the source file like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Here is the program you asked for which prints "Hello":

greeting.py
```
def greeting():
    print("Hello")
```
</code></pre></div></div>

<p>Both JSON strategies required the LLM to call the <code class="language-plaintext highlighter-rouge">write_file</code> function with
an explanation/plan and
the entire updated copy of the source file.
The LLM didn’t have to specify the filename,
since the benchmark operates on one source file at a time.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"explanation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Here is the program you asked for which prints </span><span class="se">\"</span><span class="s2">Hello</span><span class="se">\"</span><span class="s2">"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"def greeting():</span><span class="se">\n</span><span class="s2">    print(</span><span class="se">\"</span><span class="s2">Hello</span><span class="se">\"</span><span class="s2">)</span><span class="se">\n</span><span class="s2">"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>This experimental setup was designed to quantify
the effects of JSON-wrapping on the LLMs ability to write code to solve a task.</p>
<h2 id="results">
  
  
    <a href="#results" class="anchor-heading" aria-labelledby="results"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Results
  
  
</h2>
    

<p>Four of the strongest code editing models were benchmarked
to assess the impact of JSON-wrapping code:</p>

<ul>
  <li>claude-3-5-sonnet-20240620</li>
  <li>deepseek-coder (V2 0724)</li>
  <li>gpt-4o-2024-05-13</li>
  <li>gpt-4o-2024-08-06</li>
</ul>

<p>Each combination of model and code wrapping strategy was benchmarked 5 times
on all 133 problems.</p>
<h3 id="overall-coding-skill">
  
  
    <a href="#overall-coding-skill" class="anchor-heading" aria-labelledby="overall-coding-skill"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overall coding skill
  
  
</h3>
    

<p>As shown in Figure 1, 
all of the models did worse on the benchmark when asked to
return code in a structured JSON response.
Most did significantly worse, performing well below
their result with the markdown strategy.</p>

<p>Some noteworthy observations:</p>

<ul>
  <li>OpenAI’s gpt-4o-2024-05-13 was the only model where the markdown and JSON results were
close. Using JSON only dropped the score by 0.4 percent, a difference which is
within the margin of error for 5 trials.</li>
  <li>The use of OpenAI’s new strict mode offered no improvement
as compared to non-strict JSON.
Both JSON results were well below the markdown result.</li>
  <li>The results from Sonnet and DeepSeek Coder suffered the worst harm from JSON wrapping.</li>
</ul>
<h3 id="syntax-errors">
  
  
    <a href="#syntax-errors" class="anchor-heading" aria-labelledby="syntax-errors"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Syntax errors
  
  
</h3>
    

<p>Models tend to make more syntax errors <em>in the code they write</em>
when asked to wrap it in JSON.
The models can reliably 
produce valid JSON, but code inside is more prone to syntax errors.</p>

<p>Figure 2 shows the number of syntax errors found in the code produced by each
model and code wrapping strategy.
It totals up the <code class="language-plaintext highlighter-rouge">SyntaxError</code> and <code class="language-plaintext highlighter-rouge">IndentationError</code> errors from all 5 runs,
for each model and strategy combination.</p>

<p>Below is an example of a <code class="language-plaintext highlighter-rouge">SyntaxError</code> created by gpt-4o-2024-05-13 using the
JSON code wrapping strategy.
It appears that the model got confused about escaping and quoting while trying
to format the JSON response.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="p">...</span>   
  <span class="n">File</span> <span class="s">"bottle-song/bottle_song.py"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">9</span>
    <span class="n">lyrics</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s">'There'</span><span class="n">ll</span> <span class="n">be</span> <span class="p">{</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">}</span> <span class="n">green</span> <span class="n">bottles</span> <span class="n">hanging</span> <span class="n">on</span> <span class="n">the</span> <span class="n">wall</span><span class="p">.</span><span class="s">')
                                                                          ^
SyntaxError: unterminated string literal (detected at line 9)
</span></code></pre></div></div>

<p>The problematic line of code contains a single-quoted string which also
contains a single-quote character.
It should have been output as the following chunk of JSON, with
a double slash in <code class="language-plaintext highlighter-rouge">There\\'ll</code>.
That is needed to JSON-escape the <code class="language-plaintext highlighter-rouge">\</code> so that it survives
JSON-decoding to 
produce <code class="language-plaintext highlighter-rouge">There\'ll</code> in the resulting code.
That would correctly escape the single-quote inside the single-quoted string.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...lyrics.append(f'There\\'ll be {i - 1} green bottles hanging on the wall.')\n...
</code></pre></div></div>

<style>
    .chart-container {
        position: relative;
        width: 100%;
        max-width: 800px;
        margin: 0 auto;
    }
</style>

<div class="chart-container">
    <canvas id="syntaxErrorsChart"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function () {
    var ctx = document.getElementById('syntaxErrorsChart').getContext('2d');
    var chartContainer = document.querySelector('.chart-container');
    
    var yamlData = [{"dirname":"2024-08-15-13-17-11--json-no-lint-gpt-4o-2024-08-06-whole","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":60.2,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":4.3,"total_cost":0.7965},{"dirname":"2024-08-15-13-18-36--json-no-lint-gpt-4o-2024-08-06-func","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"JSON","commit_hash":"bac04a2","pass_rate_1":57.9,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":1,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":5.7,"total_cost":0.8417},{"dirname":"2024-08-15-13-21-55--json-no-lint-gpt-4o-2024-05-13-func","test_cases":133,"model":"gpt-4o-2024-05-13","edit_format":"JSON","commit_hash":"bac04a2","pass_rate_1":60.2,"percent_cases_well_formed":100.0,"error_outputs":2,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":1,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model gpt-4o-2024-05-13","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":7.1,"total_cost":1.2285},{"dirname":"2024-08-15-13-23-33--json-no-lint-claude-3.5-sonnet-whole","test_cases":133,"model":"claude-3.5-sonnet","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":60.2,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model claude-3.5-sonnet","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":10.5,"total_cost":1.6714},{"dirname":"2024-08-15-13-26-38--json-no-lint-deepseek-coder-whole","test_cases":133,"model":"deepseek-coder V2 0724","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":59.4,"percent_cases_well_formed":100.0,"error_outputs":2,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":2,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model deepseek-coder","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":27.9,"total_cost":0.0438},{"dirname":"2024-08-15-13-50-03--json-no-lint-gpt-4o-2024-08-06-whole-2","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":61.7,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":4.2,"total_cost":0.7946},{"dirname":"2024-08-15-13-51-36--json-no-lint-gpt-4o-2024-08-06-func-2","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"JSON","commit_hash":"bac04a2","pass_rate_1":56.4,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":1,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":6.4,"total_cost":0.839},{"dirname":"2024-08-15-13-54-53--json-no-lint-gpt-4o-2024-05-13-func-2","test_cases":133,"model":"gpt-4o-2024-05-13","edit_format":"JSON","commit_hash":"bac04a2","pass_rate_1":60.2,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":1,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model gpt-4o-2024-05-13","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":7.7,"total_cost":1.221},{"dirname":"2024-08-15-13-56-21--json-no-lint-claude-3.5-sonnet-whole-2","test_cases":133,"model":"claude-3.5-sonnet","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":60.9,"percent_cases_well_formed":100.0,"error_outputs":1,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model claude-3.5-sonnet","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":16.5,"total_cost":1.6556},{"dirname":"2024-08-15-14-06-12--json-no-lint-deepseek-coder-whole-2","test_cases":133,"model":"deepseek-coder V2 0724","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":60.9,"percent_cases_well_formed":100.0,"error_outputs":2,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":1,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model deepseek-coder","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":25.8,"total_cost":0.0439},{"dirname":"2024-08-15-14-11-45--json-no-lint-gpt-4o-2024-08-06-whole-3","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":60.9,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":4.3,"total_cost":0.7945},{"dirname":"2024-08-15-14-13-11--json-no-lint-gpt-4o-2024-08-06-func-3","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"JSON","commit_hash":"bac04a2","pass_rate_1":56.4,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":1,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":5.6,"total_cost":0.822},{"dirname":"2024-08-15-14-16-34--json-no-lint-gpt-4o-2024-05-13-func-3","test_cases":133,"model":"gpt-4o-2024-05-13","edit_format":"JSON","commit_hash":"bac04a2","pass_rate_1":58.6,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model gpt-4o-2024-05-13","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":8.7,"total_cost":1.2064},{"dirname":"2024-08-15-14-17-51--json-no-lint-claude-3.5-sonnet-whole-3","test_cases":133,"model":"claude-3.5-sonnet","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":60.2,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model claude-3.5-sonnet","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":11.0,"total_cost":1.6555},{"dirname":"2024-08-15-14-21-06--json-no-lint-deepseek-coder-whole-3","test_cases":133,"model":"deepseek-coder V2 0724","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":61.7,"percent_cases_well_formed":100.0,"error_outputs":3,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":2,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":3,"command":"llmcode --model deepseek-coder","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":24.4,"total_cost":0.0439},{"dirname":"2024-08-15-14-27-17--json-no-lint-gpt-4o-2024-08-06-whole-4","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":60.2,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":4.3,"total_cost":0.8015},{"dirname":"2024-08-15-14-28-58--json-no-lint-gpt-4o-2024-08-06-func-4","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"JSON","commit_hash":"bac04a2","pass_rate_1":60.2,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":6.0,"total_cost":0.8394},{"dirname":"2024-08-15-14-32-58--json-no-lint-gpt-4o-2024-05-13-func-4","test_cases":133,"model":"gpt-4o-2024-05-13","edit_format":"JSON","commit_hash":"bac04a2","pass_rate_1":59.4,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":2,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model gpt-4o-2024-05-13","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":11.1,"total_cost":1.212},{"dirname":"2024-08-15-14-34-39--json-no-lint-claude-3.5-sonnet-whole-4","test_cases":133,"model":"claude-3.5-sonnet","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":60.9,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model claude-3.5-sonnet","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":11.3,"total_cost":1.6635},{"dirname":"2024-08-15-14-38-35--json-no-lint-deepseek-coder-whole-4","test_cases":133,"model":"deepseek-coder V2 0724","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":59.4,"percent_cases_well_formed":100.0,"error_outputs":2,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":2,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model deepseek-coder","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":24.5,"total_cost":0.0438},{"dirname":"2024-08-15-14-44-11--json-no-lint-gpt-4o-2024-08-06-whole-5","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":60.9,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":4.6,"total_cost":0.8023},{"dirname":"2024-08-15-14-45-40--json-no-lint-gpt-4o-2024-08-06-func-5","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"JSON","commit_hash":"bac04a2","pass_rate_1":57.1,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":3,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":6.3,"total_cost":0.8354},{"dirname":"2024-08-15-14-49-44--json-no-lint-gpt-4o-2024-05-13-func-5","test_cases":133,"model":"gpt-4o-2024-05-13","edit_format":"JSON","commit_hash":"bac04a2","pass_rate_1":59.4,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":4,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model gpt-4o-2024-05-13","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":10.5,"total_cost":1.2099},{"dirname":"2024-08-15-14-51-18--json-no-lint-claude-3.5-sonnet-whole-5","test_cases":133,"model":"claude-3.5-sonnet","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":60.2,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model claude-3.5-sonnet","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":11.4,"total_cost":1.6685},{"dirname":"2024-08-15-14-54-41--json-no-lint-deepseek-coder-whole-5","test_cases":133,"model":"deepseek-coder V2 0724","edit_format":"Markdown","commit_hash":"bac04a2","pass_rate_1":61.7,"percent_cases_well_formed":100.0,"error_outputs":2,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":2,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model deepseek-coder","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":24.5,"total_cost":0.0439},{"dirname":"2024-08-15-15-12-55--json-no-lint-strict-gpt-4o-2024-08-06-func-2","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"JSON (strict)","commit_hash":"bf2d5fe","pass_rate_1":57.1,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":5.9,"total_cost":0.8216},{"dirname":"2024-08-15-15-14-31--json-no-lint-strict-gpt-4o-2024-08-06-func-3","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"JSON (strict)","commit_hash":"bf2d5fe","pass_rate_1":54.1,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":2,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":6.3,"total_cost":0.841},{"dirname":"2024-08-15-15-16-14--json-no-lint-strict-gpt-4o-2024-08-06-func-4","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"JSON (strict)","commit_hash":"bf2d5fe","pass_rate_1":59.4,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":5.9,"total_cost":0.8203},{"dirname":"2024-08-15-15-17-50--json-no-lint-strict-gpt-4o-2024-08-06-func-5","test_cases":133,"model":"gpt-4o-2024-08-06","edit_format":"JSON (strict)","commit_hash":"bf2d5fe","pass_rate_1":57.1,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":1,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-08-06","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":6.1,"total_cost":0.8415},{"dirname":"2024-08-15-17-36-22--json-no-lint-again-gpt-4o-2024-05-13-whole-1","test_cases":133,"model":"gpt-4o-2024-05-13","edit_format":"Markdown","commit_hash":"ed94379","pass_rate_1":60.2,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":7,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-05-13","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":6.8,"total_cost":1.511},{"dirname":"2024-08-15-17-38-13--json-no-lint-again-gpt-4o-2024-05-13-whole-2","test_cases":133,"model":"gpt-4o-2024-05-13","edit_format":"Markdown","commit_hash":"ed94379","pass_rate_1":60.9,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-05-13","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":7.0,"total_cost":1.4954},{"dirname":"2024-08-15-17-40-10--json-no-lint-again-gpt-4o-2024-05-13-whole-3","test_cases":133,"model":"gpt-4o-2024-05-13","edit_format":"Markdown","commit_hash":"ed94379","pass_rate_1":60.9,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":0,"command":"llmcode --model gpt-4o-2024-05-13","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":6.8,"total_cost":1.4999},{"dirname":"2024-08-15-17-41-30--json-no-lint-again-gpt-4o-2024-05-13-whole-4","test_cases":133,"model":"gpt-4o-2024-05-13","edit_format":"Markdown","commit_hash":"ed94379","pass_rate_1":58.6,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-05-13","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":7.4,"total_cost":1.4848},{"dirname":"2024-08-15-17-43-12--json-no-lint-again-gpt-4o-2024-05-13-whole-5","test_cases":133,"model":"gpt-4o-2024-05-13","edit_format":"Markdown","commit_hash":"ed94379","pass_rate_1":59.4,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model gpt-4o-2024-05-13","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":7.6,"total_cost":1.4948},{"dirname":"2024-08-15-19-35-32--json-no-lint-again-deepseek-coder-func-1","test_cases":133,"model":"deepseek-coder V2 0724","edit_format":"JSON","commit_hash":"3a2ac02-dirty","pass_rate_1":50.4,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":2,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model deepseek-coder","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":17.8,"total_cost":0.033},{"dirname":"2024-08-15-19-37-50--json-no-lint-again-deepseek-coder-func-2","test_cases":133,"model":"deepseek-coder V2 0724","edit_format":"JSON","commit_hash":"1a98c28","pass_rate_1":49.6,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":5,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model deepseek-coder","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":18.3,"total_cost":0.0336},{"dirname":"2024-08-15-19-40-20--json-no-lint-again-deepseek-coder-func-3","test_cases":133,"model":"deepseek-coder V2 0724","edit_format":"JSON","commit_hash":"1a98c28","pass_rate_1":48.9,"percent_cases_well_formed":100.0,"error_outputs":1,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":5,"indentation_errors":1,"exhausted_context_windows":1,"test_timeouts":2,"command":"llmcode --model deepseek-coder","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":18.4,"total_cost":0.0337},{"dirname":"2024-08-15-19-44-07--json-no-lint-again-deepseek-coder-func-4","test_cases":133,"model":"deepseek-coder V2 0724","edit_format":"JSON","commit_hash":"1a98c28","pass_rate_1":53.4,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":2,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":2,"command":"llmcode --model deepseek-coder","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":17.6,"total_cost":0.033},{"dirname":"2024-08-15-19-46-48--json-no-lint-again-deepseek-coder-func-5","test_cases":133,"model":"deepseek-coder V2 0724","edit_format":"JSON","commit_hash":"1a98c28-dirty","pass_rate_1":53.4,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":11,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":2,"command":"llmcode --model deepseek-coder","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":18.0,"total_cost":0.0332},{"dirname":"2024-08-15-20-07-59--json-no-lint-again-claude-3.5-sonnet-func-1","test_cases":133,"model":"claude-3.5-sonnet","edit_format":"JSON","commit_hash":"1a98c28","pass_rate_1":54.1,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model claude-3.5-sonnet","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":9.5,"total_cost":1.5789},{"dirname":"2024-08-15-20-09-39--json-no-lint-again-claude-3.5-sonnet-func-2","test_cases":133,"model":"claude-3.5-sonnet","edit_format":"JSON","commit_hash":"1a98c28","pass_rate_1":55.6,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model claude-3.5-sonnet","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":9.2,"total_cost":1.5916},{"dirname":"2024-08-15-20-11-39--json-no-lint-again-claude-3.5-sonnet-func-3","test_cases":133,"model":"claude-3.5-sonnet","edit_format":"JSON","commit_hash":"1a98c28","pass_rate_1":53.4,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model claude-3.5-sonnet","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":10.3,"total_cost":1.5896},{"dirname":"2024-08-15-20-13-44--json-no-lint-again-claude-3.5-sonnet-func-4","test_cases":133,"model":"claude-3.5-sonnet","edit_format":"JSON","commit_hash":"1a98c28","pass_rate_1":55.6,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model claude-3.5-sonnet","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":9.2,"total_cost":1.6},{"dirname":"2024-08-15-20-15-51--json-no-lint-again-claude-3.5-sonnet-func-5","test_cases":133,"model":"claude-3.5-sonnet","edit_format":"JSON","commit_hash":"1a98c28","pass_rate_1":51.9,"percent_cases_well_formed":100.0,"error_outputs":0,"num_malformed_responses":0,"num_with_malformed_responses":0,"user_asks":0,"lazy_comments":0,"syntax_errors":0,"indentation_errors":0,"exhausted_context_windows":0,"test_timeouts":1,"command":"llmcode --model claude-3.5-sonnet","date":"2024-08-15","versions":"0.50.2-dev","seconds_per_case":8.9,"total_cost":1.5936}];
    
    var models = [...new Set(yamlData.map(item => item.model))].sort();
    var editFormats = [...new Set(yamlData.map(item => item.edit_format))];
    
    var datasets = editFormats.map(format => ({
        label: format,
        data: models.map(model => {
            var items = yamlData.filter(d => d.model === model && d.edit_format === format);
            if (items.length === 0) return null;
            var totalErrors = items.reduce((sum, item) => sum + item.syntax_errors + item.indentation_errors, 0);
            return totalErrors;
        }),
        backgroundColor: function(context) {
            const format = context.dataset.label;
            if (format === 'Markdown') {
                return 'rgba(54, 162, 235, 0.8)';
            } else if (format.startsWith('JSON')) {
                const ctx = context.chart.ctx;
                const gradient = ctx.createPattern(createStripedCanvas(format === 'JSON (strict)'), 'repeat');
                return gradient;
            } else {
                return 'rgba(75, 192, 192, 0.8)';
            }
        },
    }));

    var data = {
        labels: models,
        datasets: datasets
    };

    function getAspectRatio() {
        var width = chartContainer.offsetWidth;
        // Gradually change aspect ratio from 2 (landscape) to 1 (square)
        return Math.max(1, Math.min(2, width / 300));
    }

    var config = {
        type: 'bar',
        data: data,
        options: {
            responsive: true,
            maintainAspectRatio: true,
            aspectRatio: getAspectRatio(),
            scales: {
                x: {
                    title: {
                        display: true,
                        text: 'Model'
                    }
                },
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'Total syntax errors from 5 runs'
                    },
                    max: 35
                }
            },
            plugins: {
                title: {
                    display: true,
                    text: 'Syntax errors by model and code wrapping strategy',
                    font: {
                        size: 16
                    }
                },
                legend: {
                    position: 'top',
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            let label = context.dataset.label || '';
                            if (label) {
                                label += ': ';
                            }
                            if (context.parsed.y !== null) {
                                label += context.parsed.y;
                            }
                            return label;
                        }
                    }
                }
            }
        },
        plugins: [{
            afterDraw: function(chart) {
                var ctx = chart.ctx;
                chart.data.datasets.forEach(function(dataset, i) {
                    var meta = chart.getDatasetMeta(i);
                    meta.data.forEach(function(bar, index) {
                        var data = dataset.data[index];
                        if (data !== null) {
                            ctx.fillStyle = '#000000';
                            ctx.textAlign = 'center';
                            ctx.textBaseline = 'bottom';
                            ctx.fillText(data, bar.x, bar.y - 5);
                        }
                    });
                });
            }
        }]
    };

    var chart = new Chart(ctx, config);

    function resizeChart() {
        chart.options.aspectRatio = getAspectRatio();
        chart.resize();
    }

    window.addEventListener('resize', resizeChart);

    // Initial resize to set correct size
    resizeChart();
});
</script>

<blockquote>
  <p>Figure 2: Number of <code class="language-plaintext highlighter-rouge">SyntaxError</code> and <code class="language-plaintext highlighter-rouge">IndentationError</code> errors found in model generated code,
totaled from 5 runs.
Models tend to make more syntax and formatting errors when asked to wrap code in JSON.</p>
</blockquote>
<h3 id="beyond-syntax-errors">
  
  
    <a href="#beyond-syntax-errors" class="anchor-heading" aria-labelledby="beyond-syntax-errors"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Beyond syntax errors
  
  
</h3>
    

<p>Sonnet’s results seems to indicate that the negative effects of JSON-wrapping 
go beyond just syntactic difficulties.
Sonnet avoided syntax errors regardless of the code wrapping strategy,
but its benchmark scores in Figure 1 were nonetheless lower with JSON.
This implies that JSON-wrapping may distract or challenge models in a way that
reduces their ability to reason about solving coding problems.</p>
<h2 id="conclusions">
  
  
    <a href="#conclusions" class="anchor-heading" aria-labelledby="conclusions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Conclusions
  
  
</h2>
    

<p>While the specific results differ from the similar
<a href="/2023/07/02/benchmarks.html">July 2023 experiments</a>,
the conclusion remains unchanged: LLMs are bad at returning code in
structured JSON responses.</p>

<p>OpenAI appears to be making progress in allowing LLMs to
return JSON-wrapped code
without harming the code quality.
But it seems premature to consider switching from plain text
to JSON-wrapped code at this time.</p><hr />
<h4 id="notes-on-the-llmcode-leaderboard">
  
  
    <a href="#notes-on-the-llmcode-leaderboard" class="anchor-heading" aria-labelledby="notes-on-the-llmcode-leaderboard"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Notes on the llmcode leaderboard
  
  
</h4>
    

<p><em>The results presented here are not directly comparable to results
from the main
<a href="https://llmcode.khulnasoft.com/docs/leaderboards/">llmcode LLM leaderboard</a>.
A number of settings were changed to simplify the benchmark
in order to focus on comparing plain text and JSON-wrapped code.</em></p>

          

          
        </main>
        


      </div>
    </div>
    
      

<div class="search-overlay"></div>

    
  </div>

  
</body>
</html>

